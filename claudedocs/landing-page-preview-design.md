# 랜딩 페이지 미리보기 화면 설계

## 개요

새 랜딩페이지 생성 화면에 실시간 미리보기, 모바일/데스크탑 토글, 실제 이미지 미리보기, 그리고 드래그 앤 드롭 기능을 추가하여 사용자 경험을 향상시켰습니다.

## 주요 기능

### 1. 디바이스 프리뷰 (모바일/데스크탑)
- **모바일 모드**: 실제 모바일 화면과 유사한 폰 프레임 디자인 (기본 뷰)
- **데스크탑 모드**: 브라우저 크롬이 포함된 데스크탑 뷰 (모달)
- **전환 버튼**: "데스크탑 미리보기" 버튼으로 모달 오픈
- **반응형 레이아웃**: 각 모드에 최적화된 레이아웃과 크기
- **공간 최적화**: 모바일 뷰는 사이드바에, 데스크탑 뷰는 전체화면 모달로 표시

### 2. 실시간 미리보기
#### 모바일 모드
- **모바일 폰 프레임**: 검은색 라운드 프레임으로 실제 폰처럼 표현
- **상태바**: 9:41 시간 표시 및 배터리 아이콘
- **스크롤 가능**: 600px 높이의 스크롤 영역

#### 데스크탑 모드 (모달)
- **전체화면 모달**: 화면 중앙에 max-w-6xl 크기의 모달 오버레이
- **브라우저 크롬**: 빨강/노랑/초록 버튼과 URL 바 포함
- **URL 표시**: 실제 랜딩 페이지 URL 미리보기
- **중앙 정렬**: max-w-4xl 컨테이너로 데스크탑 레이아웃 최적화
- **넓은 여백**: 8rem 패딩으로 여유있는 레이아웃
- **닫기 기능**: X 버튼 또는 오버레이 클릭으로 모달 닫기

### 3. 실제 이미지 미리보기
- **업로드 이미지 표시**: 파일 업로드 즉시 실제 이미지 렌더링
- **Object Cover**: 이미지 비율 유지하며 h-48로 일정한 높이 유지
- **다중 이미지 표시**: 2개 이상 업로드 시 "+N more" 뱃지 표시
- **Base64/Blob URL**: createObjectURL로 임시 미리보기 생성

### 4. 드래그 앤 드롭 섹션 순서 변경
- **직관적인 UI**: 마우스 호버 시 드래그 핸들 표시
- **시각적 피드백**:
  - 드래그 중인 항목은 투명도 50%, 크기 95%로 축소
  - 호버 시 인디고 링 표시
  - 섹션 레이블 뱃지 표시
- **자동 재정렬**: 드래그하여 이동하면 실시간으로 순서 변경

### 5. 섹션 타입별 미리보기

#### 히어로 이미지
- **이미지 업로드 시**: 실제 업로드한 이미지 표시 (w-full h-48 object-cover)
- **다중 이미지**: 첫 번째 이미지 표시 + 우측 하단에 "+N more" 뱃지
- **이미지 없을 시**: 회색 배경 + 회색 PhotoIcon 플레이스홀더

#### 제목
- 입력한 제목 또는 기본 텍스트 "랜딩 페이지 제목"
- 중앙 정렬, 볼드 처리

#### 설명
- 고정 텍스트: "랜딩 페이지 설명 영역입니다"
- 중앙 정렬, 회색 텍스트

#### DB 수집 폼
- 활성화된 필드만 표시
  - 1. 이름 (체크박스 선택 시)
  - 2. 연락처 (체크박스 선택 시)
  - 3, 4, 5... 커스텀 필드 (추가한 질문들)
- 각 필드는 흰 배경 + 회색 테두리 카드로 표시

#### 실시간 현황
- 파란색 그라디언트 배경
- 녹색 점멸 아이콘 + "현재 XXX명 상담 신청" 텍스트
- 사용 안함 선택 시 미리보기에서 제거

#### 타이머
- 빨간색-주황색 그라디언트 배경
- 시계 아이콘 + "00:29:59" 카운트다운
- 사용 안함 선택 시 미리보기에서 제거

#### CTA 버튼
- 입력한 버튼명 또는 기본 "상담 신청하기"
- 선택한 색상으로 배경 표시
- 전체 너비, 둥근 모서리, 그림자 효과
- 사용 안함 선택 시 미리보기에서 제거

#### 전화 연결 버튼
- 녹색 배경 + 전화 아이콘
- "전화 상담 받기" 고정 텍스트
- 전체 너비, 둥근 모서리, 그림자 효과
- 사용 안함 선택 시 미리보기에서 제거

## 기술 구현

### 상태 관리

```typescript
interface Section {
  id: string
  type: SectionType
  label: string
  enabled: boolean
}

const [sections, setSections] = useState<Section[]>([
  { id: '1', type: 'hero_image', label: '히어로 이미지', enabled: true },
  { id: '2', type: 'title', label: '제목', enabled: true },
  // ... 나머지 섹션들
])

const [draggedIndex, setDraggedIndex] = useState<number | null>(null)
const [showDesktopPreview, setShowDesktopPreview] = useState(false)
```

### 이미지 업로드 처리

```typescript
const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
  const files = e.target.files
  if (!files || files.length === 0) return

  // createObjectURL로 임시 미리보기 URL 생성
  const newImages = Array.from(files).map((file) => URL.createObjectURL(file))
  setImages([...images, ...newImages])
}

// 미리보기에서 실제 이미지 표시
case 'hero_image':
  return images.length > 0 ? (
    <div className="relative rounded-lg overflow-hidden">
      <img src={images[0]} alt="Hero" className="w-full h-48 object-cover" />
      {images.length > 1 && (
        <div className="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full">
          +{images.length - 1} more
        </div>
      )}
    </div>
  ) : (...)
```

### 드래그 앤 드롭 로직

1. **handleDragStart**: 드래그 시작 시 현재 인덱스 저장
2. **handleDragOver**: 드래그 중 섹션 배열 재정렬
3. **handleDragEnd**: 드래그 종료 시 인덱스 초기화

```typescript
const handleDragOver = (e: React.DragEvent, index: number) => {
  e.preventDefault()
  if (draggedIndex === null || draggedIndex === index) return

  const newSections = [...sections]
  const draggedSection = newSections[draggedIndex]
  newSections.splice(draggedIndex, 1)
  newSections.splice(index, 0, draggedSection)

  setSections(newSections)
  setDraggedIndex(index)
}
```

### 조건부 렌더링

`getPreviewContent` 함수에서 각 섹션의 활성화 상태를 확인:
- 비활성화된 섹션은 `null` 반환
- 필터링을 통해 미리보기에서 제외

```typescript
sections
  .filter(section => {
    const content = getPreviewContent(section)
    return content !== null
  })
  .map((section, index) => {
    // 렌더링
  })
```

## 사용자 경험 개선

### 1. 디바이스 전환 UX
- **모달 버튼**: 인디고 색상의 "데스크탑 미리보기" 버튼으로 명확한 액션 제공
- **아이콘 사용**: 데스크탑 모니터 아이콘으로 직관적 표현
- **모달 오픈**: 클릭 즉시 전체화면 모달로 데스크탑 뷰 표시
- **상태 유지**: 섹션 순서와 내용은 모달 전환 시에도 유지
- **공간 효율**: 사이드바는 모바일 뷰만 표시하여 공간 제약 해결

### 2. 시각적 계층
#### 모바일 모드 (사이드바)
- **폰 프레임**: 검은색 라운드 배경으로 실제 폰처럼 강조
- **상태바**: 실제 폰의 상태바 재현 (9:41, 배터리)
- **컴팩트 레이아웃**: 좁은 화면에 최적화된 디자인
- **Sticky 위치**: 스크롤 시에도 항상 보이도록 고정

#### 데스크탑 모드 (모달)
- **전체화면 오버레이**: 검은색 반투명 배경으로 집중도 향상
- **브라우저 크롬**: macOS 스타일 창 버튼 (빨강/노랑/초록)
- **URL 바**: 실제 랜딩 페이지 URL 표시로 현실감 제공
- **넓은 레이아웃**: max-w-4xl로 데스크탑 화면 최적화
- **여백 처리**: 8rem 패딩으로 넓고 여유있는 느낌
- **모달 헤더**: "데스크탑 미리보기" 제목과 X 닫기 버튼

### 3. 실제 이미지 미리보기
- **즉시 반영**: 파일 선택 즉시 미리보기에 실제 이미지 표시
- **비율 유지**: object-cover로 이미지 왜곡 없이 표시
- **다중 이미지 표시**: "+2 more" 등의 뱃지로 추가 이미지 존재 알림
- **플레이스홀더**: 이미지 없을 시 회색 아이콘으로 빈 상태 표시

### 4. 인터랙션 피드백
- **호버 효과**: 드래그 핸들, 섹션 레이블 표시
- **드래그 효과**: 투명도/크기 변경으로 현재 드래그 중인 항목 표시
- **링 효과**: 호버 시 인디고 색상 링으로 섹션 강조
- **부드러운 애니메이션**: transition-all duration-200으로 자연스러운 전환

### 5. 도움말
- 미리보기 하단에 사용법 안내
- 현재 모드 (모바일/데스크탑) 표시
- 아이콘 + 텍스트로 명확한 가이드 제공

## 디자인 원칙

### 1. 반응형 디자인
- `sticky top-6`: 스크롤 시 미리보기 고정
- 모바일 폰 비율 유지
- 스크롤 가능한 콘텐츠 영역

### 2. 일관성
- Indigo-Purple 그라디언트 브랜드 색상 유지
- 둥근 모서리, 그림자 효과 통일
- 폰트 크기 계층 구조 일관성

### 3. 접근성
- 드래그 핸들에 충분한 터치 영역
- 명확한 시각적 피드백
- 텍스트 가독성 우선

## 완료된 개선 사항

1. ✅ **실제 이미지 미리보기**: 업로드한 이미지를 실제로 표시
2. ✅ **반응형 모드**: 모바일/데스크탑 미리보기 (모달 방식)
3. ✅ **드래그 앤 드롭**: 섹션 순서 변경 기능
4. ✅ **실시간 업데이트**: 폼 입력 즉시 미리보기 반영
5. ✅ **다중 이미지 지원**: 여러 이미지 업로드 및 "+N more" 표시
6. ✅ **공간 최적화**: 데스크탑 미리보기를 모달로 전환하여 사이드바 공간 효율 개선

## 향후 개선 사항

1. **이미지 업로드 개선**:
   - Supabase Storage 연동으로 실제 이미지 저장
   - 이미지 압축 및 최적화
   - 드래그 앤 드롭으로 이미지 업로드
   - 이미지 순서 변경 기능

2. **색상 피커**: CTA 버튼 색상 변경 UI 구현

3. **타이머 설정**:
   - 타이머 시간 커스터마이징 (분:초 입력)
   - 타이머 스타일 옵션 (긴급/일반)

4. **전화번호 입력**: 전화 연결 버튼에 실제 번호 연결

5. **템플릿 시스템**:
   - 섹션 순서를 템플릿으로 저장
   - 미리 만들어진 템플릿 제공

6. **실시간 공유**: 미리보기 URL 생성 및 공유

7. **태블릿 모드**: 모바일/데스크탑 외 태블릿 미리보기 추가

## 파일 위치

- **컴포넌트**: `/src/components/landing-pages/LandingPageNewForm.tsx`
- **페이지**: `/src/app/dashboard/landing-pages/new/page.tsx`
- **문서**: `/claudedocs/landing-page-preview-design.md`

## 결론

실시간 미리보기, 모바일/데스크탑 모달 전환, 실제 이미지 표시, 드래그 앤 드롭 기능을 통해 사용자가 랜딩 페이지 구성을 시각적으로 확인하고 직관적으로 수정할 수 있게 되었습니다.

### 주요 성과
- ✅ **즉시 피드백**: 입력 즉시 미리보기 반영으로 빠른 확인
- ✅ **실제 이미지**: 업로드한 이미지를 실제로 보여줘 현실적인 미리보기
- ✅ **다중 디바이스**: 모바일/데스크탑 모달 전환으로 반응형 확인
- ✅ **유연한 레이아웃**: 드래그 앤 드롭으로 섹션 순서 자유롭게 변경
- ✅ **공간 효율**: 데스크탑 미리보기를 모달로 구현하여 사이드바 공간 제약 해결

이는 랜딩 페이지 생성 프로세스를 더욱 효율적이고 사용자 친화적으로 만들어줍니다.

### UX 개선 내역
**문제**: 기존 토글 방식은 사이드바 공간을 많이 차지하여 화면 제약으로 보기 불편함
**해결**: 데스크탑 미리보기를 모달 방식으로 전환
- 사이드바는 모바일 미리보기만 표시 (기본 뷰)
- "데스크탑 미리보기" 버튼 클릭 시 전체화면 모달 오픈
- 모달 내에서 넓은 화면으로 데스크탑 레이아웃 확인 가능
- X 버튼으로 모달 닫기 및 모바일 뷰로 복귀
